#!/bin/bash
CREDENTIALS=$HOME/.ssh/sycred
OPTIONS=credentials=$CREDENTIALS,vers=2.0,soft

ARRAY=( \
  '//SYANDUS/Business:biz'  \
  '//SYANDUS/Art:art'  \
  '//SYANDUS/Staff:staff'  \
  '//SYANDUS/Software:software'  \
  )

for pair in "${ARRAY[@]}" ; do
  SYPATH=${pair%%:*}
  DIR=${pair#*:}

  if mount | grep "$SYPATH" > /dev/null; then
    echo "$SYPATH already mounted"
  else
    mkdir -p "/mnt/$DIR"
    EXTRA_OPT=",ro"
    if [ "$DIR" == "staff" ]; then
      EXTRA_OPT=",uid=1000"
    fi
    sudo mount -t cifs "$SYPATH" "/mnt/$DIR" -o $OPTIONS$EXTRA_OPT

    CMD="sudo mount -t cifs "$SYPATH" "/mnt/$DIR" -o $OPTIONS$EXTRA_OPT"
    echo $CMD
    $CMD
  fi
done
